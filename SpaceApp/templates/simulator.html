<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NASA-based Meteor Impact Simulator</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background-color: #e9eef2; color: #333; }
        .home-button {
            position: fixed;
            top: 18px;
            right: 18px;
            width: 44px;
            height: 44px;
            background: #004d99;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            text-decoration: none;
            z-index: 9999;
            transition: transform 0.15s ease, background 0.15s ease;
        }
        .home-button svg { display: block; }
        .home-button:hover { transform: translateY(-2px); background: #003a75; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); }
        h2 { color: #004d99; border-bottom: 3px solid #004d99; padding-bottom: 10px; margin-bottom: 25px; }
        .input-group { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px; }
        .input-item { flex: 1 1 45%; }
        label { display: block; margin-bottom: 5px; font-weight: 600; color: #555; }
        input[type="number"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        button { background-color: #ff6f61; color: white; padding: 12px 25px; border: none; border-radius: 6px; cursor: pointer; font-size: 17px; font-weight: bold; transition: background-color 0.3s; width: 100%; }
        button:hover { background-color: #e55a50; }
        #sonuclar { margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px; }
        .result-section { margin-bottom: 20px; padding: 15px; border-left: 5px solid #004d99; background-color: #f8fbfc; border-radius: 4px; }
        .result-title { font-size: 1.2em; font-weight: 700; color: #004d99; margin-bottom: 10px; }
        .value { font-size: 1.1em; font-weight: 700; color: #333; }
        .alert { color: #cc0000; font-weight: bold; }
        .kaynakca { margin-top: 40px; padding-top: 20px; border-top: 1px dashed #ccc; font-size: 0.9em; color: #666; }
        .kaynakca h3 { color: #555; margin-bottom: 10px; }
        .kaynakca ul { list-style-type: none; padding-left: 0; }
    </style>
</head>
<body>

<!-- Home button to return to Explore -->
<a href="{% url 'explore' %}" class="home-button" title="Ana Sayfaya Dön">
<!-- Home button to return to Explore -->
<a href="{% url 'explore' %}" class="home-button" title="Return to Home">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M3 11.5L12 4L21 11.5V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 20.5523 15 20V15C15 14.4477 14.5523 14 14 14H10C9.44772 14 9 14.4477 9 15V20C9 20.5523 8.55228 21 8 21H4C3.44772 21 3 20.5523 3 20V11.5Z" fill="white"/>
    </svg>
</a>

<div class="container">
    <h2>Simplified Meteor Impact Simulation (Angle & Material Sensitive)</h2>

    <div class="input-group">
        <div class="input-item">
            <label for="cap">Impactor Diameter (L) (meters):</label>
            <input type="number" id="cap" value="50" min="1">
        </div>
        <div class="input-item">
            <label for="yogunluk">Density (ρ<sub>p</sub>) (kg/m³ - Impactor):</label>
            <input type="number" id="yogunluk" value="3000" min="100">
        </div>
        <div class="input-item">
            <label for="hiz">Impact Velocity (U) (km/s):</label>
            <input type="number" id="hiz" value="17" min="1">
        </div>
        <div class="input-item">
            <label for="angle">Entry Angle (θ) (degrees - 90: Vertical):</label>
            <input type="number" id="angle" value="45" min="1" max="90">
        </div>
        <div class="input-item">
            <label for="mesafe">Distance for Effects Calculation (R) (km):</label>
            <input type="number" id="mesafe" value="5" min="0.1">
        </div>
         <div class="input-item">
            <label for="g">Gravitational Acceleration (g) (m/s² - Earth: 9.8):</label>
            <input type="number" id="g" value="9.8" min="0.1" step="0.1">
        </div>
    </div>

    <button onclick="hesapla()">Simulate Impact & Effects</button>

    <div id="sonuclar"></div>

    <div class="kaynakca">
        <h3>Data Sources and Methodology</h3>
        <p>The calculations in this simulator are based on widely used scientific scaling laws from planetary science literature. Results provide a simplified demonstration and do not replace full physical modeling.</p>
        
        <ul>
            <li><strong>Primary Model Source:</strong> The scientific basis for the calculations is derived from the core formulas of the <strong>Earth Impact Effects Program</strong> (pi-scaling laws) developed by Dr. H. Jay Melosh and Dr. Gareth S. Collins and used by <strong>NASA</strong> and U.S. government studies.</li>
            
            <li><strong>Crater Diameter:</strong> The gravity-dominated regime formula includes an <em>entry angle</em> factor:
                <p style="margin-left: 15px;">
                D<sub>tr</sub> ≈ 1.8 × L × (ρ<sub>p</sub>/ρ<sub>t</sub>)<sup>1/3</sup> × (g × L / U²)<sup>-0.22</sup> × (sinθ)<sup>1/3</sup><br>
                D<sub>final</sub> ≈ 1.25 × D<sub>tr</sub>
                </p>
            </li>

            <li><strong>Kinetic Energy:</strong>
                <p style="margin-left: 15px;">
                m = ρ<sub>p</sub> × (4/3) π r³<br>
                E<sub>k</sub> = 0.5 × m × U²<br>
                E<sub>TNT</sub> (Megaton) = E<sub>k</sub> / 4.184×10<sup>15</sup>
                </p>
            </li>

            <li><strong>Airburst Overpressure:</strong>
                <p style="margin-left: 15px;">
                P<sub>peak</sub> (MPa) ≈ 177 × E<sub>TNT</sub><sup>1/3</sup> / R
                </p>
            </li>

            <li><strong>Seismic Effect (Magnitude):</strong>
                <p style="margin-left: 15px;">
                E<sub>s</sub> = E<sub>k</sub> × 10<sup>-4</sup><br>
                M<sub>s</sub> = (log<sub>10</sub>(E<sub>s</sub>) - 4.8) / 1.5
                </p>
            </li>

            <li><strong>Structural Effect:</strong> The impactor density (ρ<sub>p</sub>) is directly used in the crater diameter and kinetic energy calculations.</li>
        </ul>

    <p>This code is provided for educational and demonstration purposes only and is not an official NASA product.</p>
    </div>
</div>

<script>
    function hesapla() {
        // --- Girdi Değerleri ---
        const L = parseFloat(document.getElementById('cap').value);
        const rho_p = parseFloat(document.getElementById('yogunluk').value);
        const U_km_s = parseFloat(document.getElementById('hiz').value);
        const theta_deg = parseFloat(document.getElementById('angle').value);
        const R_km = parseFloat(document.getElementById('mesafe').value);
        const g = parseFloat(document.getElementById('g').value);

        // --- Sabitler ve Birim Dönüşümleri ---
        const U = U_km_s * 1000; 
        const R = R_km * 1000; 
        const PI = Math.PI;
        const RHO_T = 2500; 
        const TNT_JOULE = 4.184e15; 
        const theta_rad = theta_deg * PI / 180;

        // --- 1. Kinetik Enerji Hesaplaması ---
        const r = L / 2;
        const V = (4/3) * PI * Math.pow(r, 3);
        const m = rho_p * V;
        const E_k = 0.5 * m * Math.pow(U, 2);
        const E_mt_tnt = E_k / TNT_JOULE;

        // --- 2. Krater Çapı Hesaplaması (Geliş Açısı Entegre Edildi) ---
        const D_tr_base = 1.8 * L * Math.pow(rho_p / RHO_T, 1 / 3) * Math.pow((g * L) / Math.pow(U, 2), -0.22);
        const D_crater = D_tr_base * Math.pow(Math.sin(theta_rad), 1 / 3); 
        const D_final = D_crater * 1.25;

        // --- 3. Hava Patlaması ve Afet Hesaplamaları ---
        const P_peak_mt = 177 * Math.pow(E_mt_tnt, 1/3) / R_km;
        const P_peak_pa = P_peak_mt * 1000000;
        const P_peak_psi = P_peak_pa * 0.000145038; 
        const hasar_limit = 27000; 

        const E_s = E_k * 1e-4;
        const Ms = (Math.log10(E_s) - 4.8) / 1.5;

        // --- Sonuçların Formatlanması ---
        let output = '';

        output += `<div class="result-section">
            <div class="result-title">1. Energy and Mass (Structural Components)</div>
            <p>Impactor Mass: <span class="value">${m.toExponential(2)}</span> kg</p>
            <p>Kinetic Energy: <span class="value">${E_k.toExponential(2)}</span> Joule</p>
            <p>TNT Equivalent: <span class="value">${E_mt_tnt.toFixed(3)}</span> Megaton (MT)</p>
        </div>`;
        
        output += `<div class="result-section">
            <div class="result-title">2. Crater Formation (Angle & Acceleration Integrated)</div>
            <p>Calculated Crater Diameter: <span class="value">${(D_final / 1000).toFixed(2)}</span> km</p>
            <p>Crater Size Note: <span class="value">Due to the entry angle (${theta_deg}°), the crater diameter is ${theta_deg < 45 ? 'smaller and more elliptical' : 'larger (90° produces the greatest effect)'} compared to a vertical impact.</span></p>
        </div>`;

        output += `<div class="result-section">
            <div class="result-title">3. Natural Disaster Effects (at R=${R_km.toFixed(1)} km)</div>
            <p>Seismic Magnitude: Moment Magnitude (<span class="value">${Ms.toFixed(1)}</span>) Ms</p>
            <p>Air Shock Wave Overpressure: <span class="value">${(P_peak_pa / 1000).toFixed(1)}</span> kPa (≈ ${(P_peak_psi).toFixed(1)} PSI)</p>
            <p>Damage Estimate (R=${R_km.toFixed(1)} km): <span class="value">`;

        if (P_peak_pa > hasar_limit * 5) {
            output += `<span class="alert">SEVERE DESTRUCTION: Reinforced concrete buildings will sustain heavy damage; many structures are expected to collapse completely.</span>`;
        } else if (P_peak_pa > hasar_limit) {
            output += `<span class="alert">DESTRUCTION: Wooden buildings may collapse completely; widespread glass breakage is expected.</span>`;
        } else if (P_peak_pa > 3000) {
            output += `Serious Damage: Windows may shatter; some light structures may sustain damage.`;
        } else {
            output += `Low Risk: Loud noise and vibration may be felt, but structural damage is not expected.`;
        }
        output += `</span></p></div>`;

        document.getElementById('sonuclar').innerHTML = output;
    }

    window.onload = hesapla;
</script>
</body>
</html>